<aside id="sidebar" class="app-sidebar">
  <nav class="sidebar-nav" aria-label="Main navigation">
    <div class="nav-section">
      <div class="nav-section-title">Main</div>
      <ul class="nav-list">
        <li>
          <a href="/pages/dashboard.html" class="nav-link" data-page="dashboard">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 6a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zm10 0a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"/>
            </svg>
            <span class="nav-text">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="/pages/watchlist.html" class="nav-link" data-page="watchlist">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
            </svg>
            <span class="nav-text">Watchlist</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Trading</div>
      <ul class="nav-list">
        <li>
          <a href="/pages/options.html" class="nav-link" data-page="options">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm1 0v12h12V4H4z"/>
              <path d="M9 7h2v6H9V7zm-3 3h2v3H6v-3zm6 1h2v2h-2v-2z"/>
            </svg>
            <span class="nav-text">Options Chain</span>
          </a>
        </li>
        <li>
          <a href="/pages/gex.html" class="nav-link" data-page="gex">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
            </svg>
            <span class="nav-text">GEX Analysis</span>
          </a>
        </li>
        <li>
          <a href="/pages/strategies.html" class="nav-link" data-page="strategies">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zm-2 4a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1z"/>
            </svg>
            <span class="nav-text">Strategies</span>
          </a>
        </li>
        <li>
          <a href="/pages/flow.html" class="nav-link" data-page="flow">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zm0 8a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zm6-6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zm0 8a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
            </svg>
            <span class="nav-text">Options Flow</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="nav-section">
      <div class="nav-section-title">Portfolio</div>
      <ul class="nav-list">
        <li>
          <a href="/pages/positions.html" class="nav-link" data-page="positions">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"/>
            </svg>
            <span class="nav-text">Positions</span>
          </a>
        </li>
        <li>
          <a href="/pages/performance.html" class="nav-link" data-page="performance">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M2 10a8 8 0 1116 0 8 8 0 01-16 0zm8-6a6 6 0 100 12 6 6 0 000-12zm0 2a4 4 0 014 4h-4V6z"/>
            </svg>
            <span class="nav-text">Performance</span>
          </a>
        </li>
        <li>
          <a href="/pages/alerts.html" class="nav-link" data-page="alerts">
            <svg class="nav-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zm0 16a2 2 0 01-2-2h4a2 2 0 01-2 2z"/>
            </svg>
            <span class="nav-text">Alerts</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="sidebar-footer">
    <div class="market-status" id="market-status">
      <span class="status-dot status-closed"></span>
      <span class="status-text">Market Closed</span>
    </div>
  </div>
</aside>

<style>
  .app-sidebar {
    position: fixed;
    top: var(--optix-header-height);
    left: 0;
    bottom: 0;
    width: var(--optix-sidebar-width);
    background: var(--optix-bg-card);
    border-right: 1px solid var(--optix-border);
    display: flex;
    flex-direction: column;
    transition: width var(--optix-transition-normal);
    z-index: calc(var(--optix-z-sticky) - 1);
    overflow-x: hidden;
  }

  .app-sidebar.collapsed {
    width: var(--optix-sidebar-collapsed);
  }

  .app-sidebar.collapsed .nav-text,
  .app-sidebar.collapsed .nav-section-title,
  .app-sidebar.collapsed .status-text {
    opacity: 0;
    visibility: hidden;
  }

  .app-sidebar.collapsed .nav-link {
    justify-content: center;
    padding: var(--optix-space-sm);
  }

  .sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: var(--optix-space-md) 0;
  }

  .nav-section {
    margin-bottom: var(--optix-space-lg);
  }

  .nav-section-title {
    padding: var(--optix-space-sm) var(--optix-space-md);
    font-size: var(--optix-font-xs);
    font-weight: var(--optix-font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--optix-text-dim);
    transition: opacity var(--optix-transition-fast);
  }

  .nav-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: var(--optix-space-md);
    padding: var(--optix-space-sm) var(--optix-space-md);
    margin: 0 var(--optix-space-sm);
    color: var(--optix-text-muted);
    text-decoration: none;
    border-radius: var(--optix-radius-md);
    transition: all var(--optix-transition-fast);
  }

  .nav-link:hover {
    background: var(--optix-bg-elevated);
    color: var(--optix-text);
  }

  .nav-link.active {
    background: var(--optix-primary-alpha);
    color: var(--optix-primary-light);
  }

  .nav-link.active .nav-icon {
    color: var(--optix-primary);
  }

  .nav-icon {
    flex-shrink: 0;
    color: var(--optix-text-dim);
    transition: color var(--optix-transition-fast);
  }

  .nav-text {
    white-space: nowrap;
    transition: opacity var(--optix-transition-fast);
  }

  .sidebar-footer {
    padding: var(--optix-space-md);
    border-top: 1px solid var(--optix-border);
  }

  .market-status {
    display: flex;
    align-items: center;
    gap: var(--optix-space-sm);
    font-size: var(--optix-font-sm);
    color: var(--optix-text-muted);
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: var(--optix-radius-full);
    flex-shrink: 0;
  }

  .status-dot.status-open {
    background: var(--optix-green);
    box-shadow: 0 0 8px var(--optix-green);
  }

  .status-dot.status-premarket,
  .status-dot.status-afterhours {
    background: var(--optix-yellow);
  }

  .status-dot.status-closed {
    background: var(--optix-text-dim);
  }

  .status-text {
    transition: opacity var(--optix-transition-fast);
  }

  @media (max-width: 768px) {
    .app-sidebar {
      transform: translateX(-100%);
      width: var(--optix-sidebar-width);
    }

    .app-sidebar.mobile-open {
      transform: translateX(0);
    }
  }
</style>

<script>
  // Update market status
  function updateMarketStatus() {
    const statusEl = document.getElementById('market-status');
    if (!statusEl) return;

    const now = new Date();
    const nyTime = new Date(now.toLocaleString('en-US', { timeZone: 'America/New_York' }));
    const hours = nyTime.getHours();
    const minutes = nyTime.getMinutes();
    const day = nyTime.getDay();
    const time = hours * 60 + minutes;

    const dot = statusEl.querySelector('.status-dot');
    const text = statusEl.querySelector('.status-text');

    // Weekend check
    if (day === 0 || day === 6) {
      dot.className = 'status-dot status-closed';
      text.textContent = 'Market Closed';
      return;
    }

    // Market hours: 9:30 AM - 4:00 PM ET
    const preMarketStart = 4 * 60; // 4:00 AM
    const marketOpen = 9 * 60 + 30; // 9:30 AM
    const marketClose = 16 * 60; // 4:00 PM
    const afterHoursEnd = 20 * 60; // 8:00 PM

    if (time >= marketOpen && time < marketClose) {
      dot.className = 'status-dot status-open';
      text.textContent = 'Market Open';
    } else if (time >= preMarketStart && time < marketOpen) {
      dot.className = 'status-dot status-premarket';
      text.textContent = 'Pre-Market';
    } else if (time >= marketClose && time < afterHoursEnd) {
      dot.className = 'status-dot status-afterhours';
      text.textContent = 'After Hours';
    } else {
      dot.className = 'status-dot status-closed';
      text.textContent = 'Market Closed';
    }
  }

  // Update status on load and every minute
  updateMarketStatus();
  setInterval(updateMarketStatus, 60000);
</script>
